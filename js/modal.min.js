"use strict";window.Modal=function(){var t;this.close_button=null,this.modal=null,this.keyListenerFunc=null,this.transitionEnd=(t=document.createElement("div")).style.WebkitTransition?"webkitTransitionEnd":t.style.OTransition?"oTransitionEnd":"transitionend",this.options=function(t,e){var o;for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}({auto_open:!0,class:"",close_button:!0,content:"",center:!1},arguments.length?arguments[0]:{}),this.options.auto_open&&this.open()},Modal.prototype.close=function(){var t,e=this;"function"==typeof this.beforeClose&&this.beforeClose(),this.modal.classList.remove("open"),document.body.classList.remove("has-modal"),document.body.removeEventListener("keyup",this.keyListenerFunc),this.modal.addEventListener(this.transitionEnd,function(){(t=e.modal.parentNode)&&t.removeChild(e.modal)}),"function"==typeof this.closed&&this.closed()},Modal.prototype.open=function(){document.body.classList.add("has-modal"),"function"==typeof this.beforeOpen&&this.beforeOpen(),function(){var t,e;t="string"==typeof this.options.content?this.options.content:this.options.content.innerHTML,this.modal=document.createElement("div"),this.modal.className="modal",this.options.class&&this.modal.classList.add(this.options.class),(e=document.createElement("div")).className="modal-content",this.options.center&&e.classList.add("center"),!0===this.options.close_button&&(this.close_button=document.createElement("span"),this.close_button.className="close",this.close_button.innerHTML="&#215;",this.modal.appendChild(this.close_button)),e.innerHTML=e.innerHTML+t,this.modal.appendChild(e),document.body.appendChild(this.modal),!0===this.options.close_button&&(this.close_button=this.modal.getElementsByClassName("close")[0])}.call(this),window.getComputedStyle(this.modal).height,function(){var o=this;this.close_button&&this.close_button.addEventListener("click",this.close.bind(o)),this.modal.addEventListener(this.transitionEnd,function(t){"opacity"==t.propertyName&&"function"==typeof o.visible&&o.visible()},!1),this.modal.addEventListener("click",function(t){for(var e=0;e<t.target.classList.length;e++)t.target.parentNode==document.body&&o.close()}),this.keyListenerFunc=function(t){27==t.which&&this.close()}.bind(this),document.querySelector("body.has-modal").addEventListener("keyup",this.keyListenerFunc)}.call(this),this.modal.classList.add(this.modal.offsetHeight>window.innerHeight?"open absolute":"open"),"function"==typeof this.opened&&this.opened()};
